<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <!-- style sheets -->
  <link rel="stylesheet" href="/stylesheet/style.css">
  <title>User Profile - Dashboard</title>
  
</head>
<body class="user-profile-page">

<!-- Import header fragment -->
<div th:replace="~{headerfragment :: siteHeader}"></div>

<!-- Enhanced Welcome Section -->
<section class="welcome-section">
  <div class="container">
    <div class="welcome-note">
      <div class="mb-2" style="font-size: 1.2rem; opacity: 0.9;">Welcome back,</div>
      <div class="text-name" th:text="${person.name}">User Name</div>
      <div class="mt-3" style="font-size: 1rem; opacity: 0.8;">
        <i class="bi bi-calendar-check me-2"></i>
        <span th:text="${#dates.format(#dates.createNow(), 'EEEE, MMMM dd, yyyy')}">Monday, January 15, 2024</span>
      </div>
    </div>
  </div>
</section>

<section class="user-details container my-4">
  <div>
    <!-- Enhanced Profile card -->
    <div class="card">
      <div class="card-header">
        <i class="bi bi-person-circle me-2"></i>Profile Details
      </div>
      <div class="card-body">
        <div class="row g-4 align-items-center">

          <!-- Enhanced Profile image -->
          <div class="col-12 col-md-auto d-flex justify-content-center">
            <div class="profile-img-container">
              <img th:src="@{/images/photo-1529139574466-a303027c1d8b.avif}"
                   th:alt="${person.name + ' profile'}"
                   class="profile-img rounded-circle object-fit-cover">
            </div>
          </div>

          <!-- Enhanced info layout -->
          <div class="col-12 col-md">
            <div class="row g-3">

              <div class="col-md-4">
                <div class="info-item">
                  <div class="info-label">
                    <i class="bi bi-person me-2"></i>Full Name
                  </div>
                  <div class="info-value" th:text="${person.name}">Dorathy Okereke</div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="info-item">
                  <div class="info-label">
                    <i class="bi bi-envelope me-2"></i>Email Address
                  </div>
                  <div class="info-value" th:text="${person.email}">dorathy@example.com</div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="info-item">
                  <div class="info-label">
                    <i class="bi bi-telephone me-2"></i>Phone Number
                  </div>
                  <div class="info-value" th:text="${person.phoneNo}">+231 08 080 8080</div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="info-item">
                  <div class="info-label">
                    <i class="bi bi-calendar-event me-2"></i>Date Applied
                  </div>
                  <div class="info-value" th:text="${person.entryDate != null ? person.entryDate : 'Not Available'}">Not Available</div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="info-item">
                  <div class="info-label">
                    <i class="bi bi-currency-exchange me-2"></i>Rent Amount
                  </div>
                  <div class="info-value" th:text="${allocation.rent != null ? '₦' + allocation.rent : 'Not Assigned'}">Not Assigned</div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="info-item">
                  <div class="info-label">
                    <i class="bi bi-door-open me-2"></i>Room Number
                  </div>
                  <div class="info-value" th:text="${allocation.roomNo != null ? 'Room ' + allocation.roomNo : 'Not Assigned'}">Not Assigned</div>
                </div>
              </div>

              <!-- Full-width items remain col-12 -->
              <div class="col-12">
                <div class="info-item">
                  <div class="info-label">
                    <i class="bi bi-geo-alt me-2"></i>House Address
                  </div>
                  <div class="info-value" th:text="${allocation.houseAddress != null ? allocation.houseAddress : 'Not Available'}">Not Available</div>
                </div>
              </div>

              <div class="col-12">
                <div class="info-item">
                  <div class="info-label">
                    <i class="bi bi-check-circle me-2"></i>Accommodation Status
                  </div>
                  <div class="info-value">
                    <span class="status-badge" 
                          th:classappend="${allocation.status == 'Active' ? 'status-active' : (allocation.status == 'Pending' ? 'status-pending' : 'status-none')}"
                          th:text="${allocation.status != null ? allocation.status : 'None'}">None</span>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Enhanced Accommodation status card -->
    <div class="card mt-4">
      <div class="card-header">
        <i class="bi bi-house-door me-2"></i>Accommodation Status
      </div>

      <!-- If no allocation -->
      <div th:if="${allocation.status == 'None'}" class="card-body">
        <div class="no-accommodation">
          <img th:src="@{/images/1bedcbc3f31ffe5889846835750fb317b7b46a2e.gif}" 
              alt="No accommodation" 
              class="accommodation-gif img-fluid">
          <h4 class="mb-3" style="color: #068ECB; font-weight: 600;">No Accommodation Yet</h4>
          <p class="text-muted mb-4" style="font-size: 1.1rem;">
            Ready to find your perfect home? Browse our available rooms and apply today!
          </p>
          <a class="click-here" th:href="@{/rooms}">
            <i class="bi bi-search me-2"></i>Find Accommodation
          </a>
        </div>
      </div>

      <!-- If active or pending allocation -->
      <div th:if="${allocation.status != 'None'}" class="card-body">
        <div class="property-display">
          <div class="row g-4">
            <div class="col-md-6">
              <div class="property-image">
                <img th:src="@{${allocation.houseImage}}" 
                    class="img-fluid rounded" 
                    alt="Property image"
                    style="width: 100%; height: 300px; object-fit: cover;">
              </div>
            </div>

            <div class="col-md-6">
              <h4 class="mb-3" style="color: #068ECB; font-weight: 600;">
                <i class="bi bi-house-door me-2"></i>
                <span th:text="'Room ' + ${allocation.roomNo}">Room Number</span>
              </h4>
              
              <!-- Enhanced property badges -->
              <div class="mb-4">
                <div class="property-badge">
                  <i class="bi bi-droplet-fill"></i> Bathroom Available
                </div>
                <div class="property-badge">
                  <i class="bi bi-bed-fill"></i> 
                  <span th:text="'Room ' + ${allocation.roomNo}">Room Info</span>
                </div>
                <div class="property-badge">
                  <i class="bi bi-building"></i> 
                  <span th:text="${allocation.houseAddress}">Building Info</span>
                </div>
              </div>
              
              <div class="mb-4">
                <div class="property-badge" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; border-color: #28a745;">
                  <i class="bi bi-geo-alt-fill"></i> 
                  <span th:text="${allocation.houseAddress}">Address</span>
                </div>
              </div>
              
              <div class="mb-4">
                <h6 style="color: #068ECB; font-weight: 600;">
                  <i class="bi bi-info-circle me-2"></i>Description
                </h6>
                <p class="text-muted" th:text="${allocation.houseDescription}">
                    Property description here...
                </p>
              </div>

              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="text-muted small">Monthly Rent</div>
                  <h5 style="color: #068ECB; font-weight: 600;">
                    <span th:text="${allocation.rent != null ? '₦' + allocation.rent : 'Contact Admin'}">Rent Amount</span>
                  </h5>
                </div>
                <a class="btn btn-blue-gradient" th:href="@{/contact}">
                  <i class="bi bi-chat-dots me-2"></i>Contact Support
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<script>
  // Enhanced page interactions
  document.addEventListener('DOMContentLoaded', function() {
    // Add staggered animation to cards
    const cards = document.querySelectorAll('.card');
    cards.forEach((card, index) => {
      card.style.animationDelay = `${index * 0.2}s`;
    });

    // Add smooth scrolling
    document.documentElement.style.scrollBehavior = 'smooth';

    // Add click analytics (if needed)
    const clickableElements = document.querySelectorAll('.click-here, .btn-blue-gradient');
    clickableElements.forEach(element => {
      element.addEventListener('click', function(e) {
        console.log('User interaction:', this.textContent.trim());
      });
    });

    // Add status badge hover effects
    const statusBadges = document.querySelectorAll('.status-badge');
    statusBadges.forEach(badge => {
      badge.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-2px) scale(1.05)';
      });
      badge.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0) scale(1)';
      });
    });
  });

  // Handle window resize for responsive adjustments
  window.addEventListener('resize', function() {
    const welcomeSection = document.querySelector('.welcome-section');
    if (window.innerWidth < 768) {
      welcomeSection.style.padding = '1.5rem 0';
    } else {
      welcomeSection.style.padding = '2rem 0';
    }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    
</body>
</html>